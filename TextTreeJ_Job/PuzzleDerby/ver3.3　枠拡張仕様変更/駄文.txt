まず何をどうしようかな
まずコールバックの遷移を変えないとな
その前に、JSON関連を見ないといけないけど、とすると、自分がつくったチケットレースのあれとか
見たり見なかったりするか。。。。。


TicketRaceShopMainか
これ気張らないと３日で終わらないな
そっか、最初の一覧の通信と、その次の選択した時で
２回通信が必要なのか
まず今回拡張するのはどことどこだっけ

3日っつても結構短いからな頑張ろう
ふんふん所有ホースと進化アイテムね
つありｃｓファイルでいうところの
せいぜい、ホース拡張とレイ拡張はスクリプトが２つあるのみだけど
ExtensionMain


とするとだよ
まず
ExtensionBoardの追加
ExtensionConfirmの追加
LeiExtensionBoardの追加
LieExtensionResultの追加

ほうほう、従来のExtensionMainではコモンウィンドウを表示するだけだったわけか
つまり今のExtensionMainの機能は
そのままExtensionConfirmに移行させるということだな
これはLeiExtensionも同様

じゃあ試しに、TicketRaceShopConfirmとExtensionMainのコード見比べてみうrか
あ全然違うわ
でも基本的にTicketraceShopConfirm準拠でいいはずだから。。。。

ExtensionResult

LeiExtensionMain
LeiExtensionResult

チケットレースはざっと見て４つある
TicketRaceShopBoardと
TicketRaceShopConfirmと
TiｃketRaceShopMainと
TicketRaceShopResultだ
まずスクリプト追加しよう
まずExtensionBoardにTicketRaceShopBoardを完コピしよう


どうなの？まず一覧表示の取得どうなのよ

TicketRaceデータ一覧はこうなっとるよ
public class NwDataTicketRaceShop
{
	public int race_ticket_id;
	これはextiention_idでまず必要でそ
　　　　　　ボードに必要な識別ＩＤだもんな

	public int own_ticket_num;
	これはいらんかいやいるよ
	チケットではないけど、このボードが金の蹄鉄を何個欲しているかを
	見極め名知夫いけない
	「金の蹄鉄○○個」　この○○の部分

	public string race_name;
	レースネームに相当するのなんだ？これはもうExtentionならさ
	「所有ホース枠○○個拡張」だろうね
	つまりTextManagerつかうとして、○○の中の個数だけほしい

	public int stage_element;
	これはさすがにいらん

	public int time_left;
	これは本当にガチでいらん
}
つまり要約すると３つか


ああもともとＮｗはそれぞれ用意されてんのか・・・・・
馬拡張の方が
NwCmdFarmExtention
NwDataFarmExtention
レイ拡張の方が
NwCmdEvolutionExtention
NwDataEvolutionExtention
かぁ、つまりここもたぶん改変が必要なんだな
どのボードを選んだのか追加しないと
まあそれは置いといて

もうこれはつまりさ
NwCmdFarmExtentionList
NwDataFarmExtrentionList
NwCmdEvolutionExtentionList
NwDataEvolutionExtentionList
を追加だな



>>坂本さん
お疲れ様です。急ぎではないですが、ver3.3の枠拡張仕様変更についての相談です。

枠拡張使用変更については、先日導入したチケットレースのapiと大体同じような流れになると思っています。

具体的にはショップTOP画面から馬枠拡張、または進化素材枠拡張のボタンを押した際に、消費蹄鉄や拡張数を格納した情報を配列で受け取るapiを、新たに2つ追加することを想定しています。

apiの中身は馬枠拡張も進化素材拡張もほぼ同じになると予想しています。
受け取る変数は3つ想定しています。
・どのアイテムを選んだかの識別ID
・そのアイテムを選択することで拡張される枠数
・そのアイテムを選択することで消費される金の蹄鉄数




新たに追加するapiの方には、リクエストパラメータは必要ないと思っています。
一方で既存のapiの [shop_farm_extend] と [shop_lei_extend] にはリクエストパラメータを追加する必要があると思っていまして、直前で選択したアイテムの識別IDを渡そうかと思っています。

そのIDを元にサーバから返ってくる[max_horse_num], [max_lei_numm], [gold_horse_shoe]の値が変化することを想定しています。
	
抜けているところ、または他の提案などがありましたらご指摘お願いします。
お手数ですがよろしくお願いします。



>>坂本さん
了解しました。とくに今後改変の予定などが無いのでしたら、1 : 5, 10 : 50, 20 : 100の固定値でこちら側だけでリストを作成していきます。

それではapiに関してはshop_farm_extendにadd_horse_numを、shop_lei_extendにadd_lei_numのリクエストパラメータを追加するのみという方向で進めて参ります。

お手数ですがよろしくお願いします。




ありがとうございます。
フレンド枠の拡張も馬枠、進化アイテム枠とほぼ同じ形で実装しようと思っております。

下記のAPIを追加しようと思いますので、ご確認ください。

API名:

shop_friend_extend

リクエストパラメータ:

add_friend_num ⇒ 拡張するフレンド枠数

レスポンス：

gold_horse_shoe ⇒ 拡張後の金の蹄鉄所持数
max_friend_num ⇒ 拡張後のフレンド枠最大数



仕様の方了解いたしました。まだフレンドの方はソースなどを見ていないので後ほど確認事項などがあるかもしれませんが、やることが似ているので恐らく大丈夫だと思います。

それではフレンドの方も上記の方向で進めていきますので、よろしくお願いします。


了解です、お手数おかけしますがよろしくお願いします。




1
2
3
4
5
enum SAMPLE
{
    CEDRIC,
    GLORIA,
}
のとき、

1
2
3
4
foreach (SAMPLE sample in Enum.GetValues(typeof(SAMPLE)))
{
    // なにかの処理
}



ん？　
0=> 1:1:5
1=> 2:10:50
2=> 3:20:100



とりあえずExtensionMainのExtensionItemをつくっとったで
再来週もよろしゅうな


とりあえずいじってるスクリプトはどれなんだ

NwCｍｄEbolutionExtensionListと
NwCmdFarmExtensionListと
NwDataEbolutionExtensionListと
NwDataFarmExtensionListは削除ね、metaも含めて
で現在改築してるのが
Shopmenu
ExtensionBoard
とExtesionConfirmと
ExtensionConfirm.pref
ExtensionMain.cs
ExtensionMain.pref
CommonWIndow

これらを編集する





   isPlay = true;
    
    // パスの調整
    path[0] = this.transform.localPosition;
    path[1].x = (path[0].x + path[2].x ) / 2.0f;
    path[1].y = (path[0].y + path[2].y ) / 2.0f + 30.0f;

    iTween.MoveTo
    (
      this.gameObject, 
      iTween.Hash 
      (
      "path", path,
      "time", 0.7f,
      "oncompletetarget", this.gameObject,
      "oncomplete", "EndAnim",
      "easetype", iTween.EaseType.linear
      )
      );




    // パスの調整
    path[0] = this.transform.localPosition;
    path[1].x = (path[0].x + path[2].x ) / 2.0f;
    path[1].y = (path[0].y + path[2].y ) / 2.0f + 30.0f;

      (
        this.gameObject, 
        iTween.Hash 
        (
        "path", path,
        "time", 0.7f,
        "oncompletetarget", this.gameObject,
        "oncomplete", "EndAnim",
        "easetype", iTween.EaseType.linear
        )
        );


  private void FailedExtension( NetworkError error )
  {
    switch( error )
    {
    case NetworkError.Inconsistent :
      switch( cmdEvolutionExtension.GetError() )
      {
      case NwCmdEvolutionExtension.ErrorType.ShortHorseShoe :
        AssertManager.Instance.SetInconsistentError( cmdEvolutionExtension, cmdEvolutionExtension.GetError().ToString(), () => MainMenuLogic.Instance.TouchShop( ShopPhase.HorseShoe ) );
        break;
      case NwCmdEvolutionExtension.ErrorType.OverLimit :
				AssertManager.Instance.SetInconsistentError( cmdEvolutionExtension, cmdEvolutionExtension.GetError().ToString(), TitleBoardManager.Instance.TouchBack );
        break;
      }
      break;
    default :
      AssertManager.Instance.SetConnectFailed( cmdEvolutionExtension, RefreshWindow );
      break;
    }
  }
  
次フレンドリストね
フレンドリストの最大値ってどこに保存されあるんだ？
UserDataManagerからとれるかな
馬枠と進化あいてむ枠はそっからとってるもんな

あ、あるやんけGetMaxFriendNum()  だ
68ずつマイナスに移動か




CreateData()
 SelectProduct( LeiExtensionItem data )
 TouchExtensionBoard 
ChangeResult()
  private void FailedExtension( NetworkError error )



If no other git process is currently running, this probably means a git process crashed in this repository earlier. Make sure no other git process is running and remove the file manually to continue.











[core]
	repositoryformatversion = 0
	filemode = false
	bare = false
	logallrefupdates = true
	symlinks = false
	ignorecase = true
	hideDotFiles = dotGitOnly
[remote "origin"]
	url = https://git.cyclone-ent.co.jp/master/netd-puzzlederby.git
	fetch = +refs/heads/*:refs/remotes/origin/*
[branch "master"]
	remote = origin
	merge = refs/heads/master
[branch "release-3.2.0-client"]
	remote = origin
	merge = refs/heads/release-3.2.0-client
[branch "develop"]
	remote = origin
	merge = refs/heads/develop














git.exe stash save --all -- "akasa"

warning: LF will be replaced by CRLF in Assets/GameScenes/Puzzle/Scripts/GameLogic.cs.bak.meta.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Puzzle/Scripts/TreasureAnim.cs.bak.meta.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Library/LastSceneManagerSetup.txt.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Library/LibraryFormatVersion.txt.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Library/ProjectSettings.asset.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Library/ScriptAssemblies/BuiltinAssemblies.stamp.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in ProjectSettings/GraphicsSettings.asset.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in ProjectSettings/ProjectSettings.asset.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in ProjectSettings/ProjectVersion.txt.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Materials/Ground_new.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Course/Materials/rachi.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Course/Materials/rachout.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Course/Materials/stand.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Course/Materials/tatemono_psd.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Effect/Start/Materials/turfDay.mat.
The file will have its original line endings in your working directory.
warning: LF will be replaced by CRLF in Assets/GameScenes/Race/Models/Sky/Materials/sky_new.mat.
The file will have its original line endings in your working directory.
Saved working directory and index state On release-3.2.0-client: akasa
HEAD is now at 6433f55 * レース中のアイテム取得のアニメーションのコードを修正。

成功 (377860 ms @ 2016/08/19 14:54:19)


git.exe stash save -- "akasa2"

Saved working directory and index state On release-3.2.0-client: akasa2
HEAD is now at 6433f55 * レース中のアイテム取得のアニメーションのコードを修正。

成功 (2047 ms @ 2016/08/19 15:04:54)



村井様

お疲れ様です、枠拡張についての相談になります。

現在、馬・進化アイテム・フレンドの枠拡張の実装を進めているのですが、資料の指示を見ながら実装したところ、下記画像のようにヘッダーのタイトルが窮屈になってしまうことが分かりました。

こちら文言を変えるなど何か対策が必要だと思うのですが、お手数ですがご返信よろしくお願いします。

>>村井さん
お待たせいたしました、修正後のスクリーンショット撮りましたのでよろしくお願いします。
下記の画像になります、問題ありませんでしたらとりあえずこの方向で進めていきます。


了解しました、「枠」の文字を追加いたします。それではよろしくお願いします。

120 > 126



          if(inviteMultiRoom == null)
          {
            inviteMultiRoom = InviteMultiRoom.Instance;
          }
             StartCoroutine(inviteMultiRoom.GoInvitedRoomForSuspend());

９：３０
166x60 > 128x64
他のやつと同様に押した瞬間の明るい




